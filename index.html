<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICT Quest: Cyber City</title>
    <link rel="stylesheet" href="style.css">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Rajdhani:wght@400;600;700&display=swap"
        rel="stylesheet">
    <style>
        /* Overriding font vars to use the new Google Fonts */
        :root {
            --font-heading: 'Rajdhani', sans-serif;
            --font-mono: 'Share Tech Mono', monospace;
        }
    </style>
</head>

<body>

    <body>
        <canvas id="bg-canvas"></canvas>
        <div id="app">
            <!-- SCREEN: INTRO -->
            <div id="intro-screen" class="screen active">
                <!-- Language Toggle -->
                <div class="lang-switch" style="position: absolute; top: 20px; right: 20px;">
                    <button class="btn btn-sm" onclick="setLang('en')" style="padding: 5px 10px;">EN</button>
                    <button class="btn btn-sm" onclick="setLang('si')" style="padding: 5px 10px;">සිං</button>
                </div>

                <h1 class="logo-glitch" data-key="INTRO_TITLE_TOP">ICT QUEST <br><span
                        style="font-size: 2rem; color: var(--color-secondary);" data-key="INTRO_TITLE_SUB">CYBER
                        CITY</span></h1>
                <p data-key="INTRO_DESC">Initialize your avatar to enter the simulation.</p>

                <div class="input-group">
                    <input type="text" id="player-name" placeholder="ENTER AGENT NAME"
                        data-key-placeholder="PLACEHOLDER_NAME" autocomplete="off" maxlength="15">
                </div>

                <button id="btn-start" class="btn" data-key="BTN_START">Connect to Server</button>
                <br><br>
                <button id="btn-missions" class="btn btn-secondary" data-key="BTN_MISSIONS" style="display:none;">Select
                    Mission</button>
            </div>

            <!-- SCREEN: GAME HUD -->
            <div id="game-screen" class="screen">
                <header id="game-header">
                    <div class="hud-item" id="hud-level">LEVEL: 01</div>
                    <div class="hud-item" id="hud-score">SCORE: 0000</div>
                    <div class="hud-item" id="hud-timer">TIME: 00:00</div>
                    <button id="btn-pause" class="btn-icon" title="Pause Game">||</button>
                </header>

                <!-- Dynamic Content Container -->
                <div id="level-container">
                    <!-- Level content will be injected here by JS -->
                </div>
            </div>

            <!-- SCREEN: LEVEL SELECT -->
            <div id="select-screen" class="screen">
                <h2 data-key="MENU_TITLE_SELECT">MISSION SELECT</h2>
                <div id="mission-list"
                    style="display:flex; gap:1rem; flex-wrap:wrap; justify-content:center; max-width:800px;">
                    <!-- Dynamically populated -->
                </div>
                <br>
                <div style="display:flex; gap:1rem;">
                    <button class="btn btn-secondary" id="btn-reset" data-key="BTN_RESET">Reset Progress</button>
                    <button class="btn btn-secondary" onclick="game.showScreen('intro')"
                        data-key="BTN_CLOSE">Back</button>
                </div>
            </div>

            <!-- SCREEN: RESULTS -->
            <div id="results-screen" class="screen">
                <h2 data-key="RES_TITLE" style="opacity: 0.7; letter-spacing: 5px;">Mission Status</h2>
                <h1 id="mission-outcome">MISSION SUCCESS</h1>

                <div class="results-stats">
                    <div class="stat-row">
                        <span class="stat-label" id="res-accuracy-lbl" data-key="RES_ACCURACY">Accuracy</span>
                        <span class="stat-value" id="res-accuracy">100%</span>
                    </div>

                    <div class="stat-row">
                        <span class="stat-label" id="res-time-lbl" data-key="RES_TIME_BONUS">Time Bonus</span>
                        <span class="stat-value" id="res-time">+500</span>
                    </div>

                    <div class="stat-row"
                        style="margin-top: 1rem; border-top: 1px solid var(--color-secondary); padding-top: 1rem;">
                        <span class="stat-label" id="res-xp-lbl" data-key="RES_TOTAL_XP"
                            style="color:var(--color-secondary);">Total XP</span>
                        <span class="stat-value xp-total" id="res-xp">1250</span>
                    </div>
                </div>

                <button id="btn-next-level" class="btn" data-key="BTN_NEXT">Next Mission</button>
            </div>
        </div>

        <!-- Feedback Modal -->
        <div class="overlay" id="overlay"></div>
        <div class="modal" id="feedback-modal">
            <h3 id="feedback-title">Info</h3>
            <p id="feedback-msg">Message goes here.</p>
            <br>
            <button class="btn btn-secondary" onclick="closeModal()">Close</button>
        </div>

        <!-- Pause Modal -->
        <div id="pause-modal" class="modal-overlay" style="display: none;">
            <div class="modal-content">
                <h2 data-key="PAUSE_TITLE">PAUSED</h2>
                <div class="modal-body" style="display: flex; flex-direction: column; gap: 1rem; align-items: center;">
                    <button id="btn-resume" class="btn" data-key="BTN_RESUME" style="width: 200px;">RESUME</button>
                    <button id="btn-restart" class="btn btn-secondary" data-key="BTN_RESTART"
                        style="width: 200px;">RESTART
                        LEVEL</button>
                    <button id="btn-quit" class="btn btn-secondary" data-key="BTN_QUIT" style="width: 200px;">QUIT TO
                        MENU</button>
                </div>
            </div>
        </div>

        <script src="js/app.js" type="module"></script>
    </body>

</html>